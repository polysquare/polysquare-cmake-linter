language: python
sudo: false
cache:
  directories:
  - ~/virtualenv
python:
- '2.7'
- '3.3'
- pypy
install:
- wget public-travis-scripts.polysquare.org/python-install.sh
- wget public-travis-scripts.polysquare.org/python-lint.sh
- wget public-travis-scripts.polysquare.org/python-tests.sh
- wget public-travis-scripts.polysquare.org/python-coverage.sh
- wget public-travis-scripts.polysquare.org/project-lint.sh
- bash python-install.sh
script:
- bash project-lint.sh -d . -e py
- bash python-lint.sh -m polysquarecmakelinter
- bash python-tests.sh -m polysquarecmakelinter
after_success:
- bash python-coverage.sh
deploy:
  provider: pypi
  user:
    secure: Gb0btOUFSLT5BJCfAxZi7ZX/pqJQnw4+HwULd12W8o3c9SHXKJKJzc5/4FH1XbwVHOP8tAI+U+ekp6X634Mrm1010v1f3t+fOp67ESUsALLmWwOmHeYK2YcRESq474ixg+i/sbcoiSQiXnh1tH4dTXhvP96WQiybitbmJsI4c1A=
  password:
    secure: KVcT0myOMwofemwsi2BCCC8YdgpVhdGYT/VX820jBcq5OSlj1PGm9xg9qXhBS0JVG7pWGe5vBwK5DbRgd8OJxZY/z14ppYH+3ReT1xpiNGfN62SH/IcbRncY20Z/XjL1yDZk1pT6Q3iqQs0b53zqX63qT3RuIEreW3HM9Q3zKlk=
  on:
    repo: polysquare/polysquare-cmake-linter
    branch: master
